<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>




<title>Unicode: Good, Bad, & Ugly</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="pod2s5 0.08" />
<meta name="generator" content="S5" />
<meta name="version" content="S5 1.1 hacked by tchrist" />
<meta name="presdate" content="Thursday, 28 July 2011" />
<meta name="author" content="Tom Christiansen" />
<meta name="company" content="&nbsp;" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />

<!-- embedded styles -->
<style type="text/css" media="all">
.imgcon {width: 525px; margin: 0 auto; padding: 0; text-align: center;}
#anim {width: 270px; height: 320px; position: relative; margin-top: 0.5em;}
#anim img {position: absolute; top: 42px; left: 24px;}
img#me01 {top: 0; left: 0;}
img#me02 {left: 23px;}
img#me04 {top: 44px;}
img#me05 {top: 43px;left: 36px;}
</style>
<!-- S5 JS -->
<script src="ui/default/slides.js" type="text/javascript"></script>
<!--
   tom AT cpan.org:
   this will not work, it's not contained
   in the downloadable S5
   <script src="/mint/?js" type="text/javascript"></script></head>
-->
</head><body>




<div class="layout">

<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header"></div>
<div id="footer">
<h1>OSCON &#8226; Thursday, 28 July 2011</h1>
<h2>Unicode: Good, Bad, & Ugly</h2></div>
</div><div class="slide">
<h1>üî´  Unicode Support Shootout 


</h1><p><blockquote>
<center>
<head3 align=center>
        <font size="+5">
üëç  The Good, the Bad, & the <font size="+3">(mostly)</font> Ugly üëé  
        </font>
</head3>
</center>
</blockquote>
<p align=right>‚Äå</p>
<h2 align=center>
<font size="+3"> Tom Christiansen<BR> </font>
&lt;tchrist@perl.com&gt; <p>
<code>These slides are at <u>http://training.perl.com/OSCON2011/index.html</u></code>
</h2>

</p></div>
<div class="slide">
<h1>What <i>is</i> this?

</h1><ul><li level="1">Get the current version of these slides in HTML, PDF, or POD from here:

<pre> http://training.perl.com/OSCON2011/index.html </pre></li><li level="1">See <i>Appendix 1: Fonts</i> at the end of this talk for instructions on font set-up.

</li><li level="1">These slides were written in pod using <i>vi</i>, with the help of a
score of Unicode tools available via the link in <i>Appendix 2: Tools</i>.

</li><li level="1">This slide show was built using <code>Pod::S5</code> by Tom Linden, which in
turn uses <code>S5</code> by Eric Meyer.  Slideshow controls appears if you hover
near the bottom right corner, but I Ô¨Ånd it easier to use
keystroke commands to navigate.

</li><li level="1">I‚Äôve used next to no HTML tricks here; nearly all 
fancy‚Äê<i>qua</i>‚Äêweird stuÔ¨Ä you see here is actually Unicode.

</li></ul></div>
<div class="slide">
<h1>üîé  Scope of This Talk

</h1><ul><li level="1">I‚Äôll Ô¨Årst motivate you by quickly showing the sorts of Unicode you now
routinely encounter in modern, real‚Äêworld text corpora.


</li><li level="1">Then I‚Äôll show you a pair of charts that give high‚Äêlevel summaries of
how far each of the more popular programming languages respectively goes ‚Äî or fails to 
go ‚Äî in its native, out‚Äêof‚Äêthe‚Äêbox Unicode support.

</li><li level="1">I‚Äôll then look into each of the covered
languages‚Äô Unicode strengths and weaknesses.

</li><li level="1">The particular languages I‚Äôll be looking at are
Javascript,
PHP,
Go,
Python,
Ruby,
Java,
and
Perl.

</li><li level="1">I‚Äôve worked with Unicode daily for years, but
I don‚Äôt know everything about everything.  Languages are listed in 
increasing order of my own experience with them ‚Äî
so I may have missed stuÔ¨Ä, especially in the earlier ones.

</li></ul></div>
<div class="slide">
<h1>The Unicode Standard

</h1><ul><li level="1">Because Unicode <b>is a üìñ  standard</b>, 
get used to checking various components of <i>The Unicode Standard</i>,
which at last glance comprised
11 standard annexes, 8 technical standards, 
and 10 technical reports. Here are some that stand out:

<ul><li level="1">üìñ  UAX #44: Unicode Character Database  (includes all properties)

</li><li level="1">üìñ  UTS #18: Unicode Regular Expressions (includes three requirement levels)

</li><li level="1">üìñ  UAX #15: Unicode Normalization Forms  (NFD, NFC, <i>&c</i>)

</li><li level="1">üìñ  UTS #10: Unicode Collation Algorithm  (UCA)

</li><li level="1">üìñ  UAX #29: Unicode Text Segmentation (includes graphemes)

</li><li level="1">üìñ  UAX #14: Unicode Line Breaking Algorithm

</li><li level="1">üìñ  UAX #11: East Asian Width

</li></ul></li><li level="1"><i>‚ÄúA Unicode Technical Report (UTR) contains informative material. Conformance to the Unicode Standard does not imply conformance to any UTR. Other speciÔ¨Åcations, however, are free to make normative reference.‚Äù</i>

</li></ul></div>
<div class="slide">
<h1>A Sample Unicode Corpus

</h1><p>The PubMed Central Open Access corpus comprises around 11G of Unicode data spread across
around 200k diÔ¨Äerent Ô¨Åles.  Here are its most commonly occurring non‚ÄêASCII code points:

</p><font size="3">

<pre>   1  18.55%  18.55%  U+02013 ‚Äπ‚Äì‚Ä∫  GC=Pd    EN DASH                               31   0.49%  88.28%  U+02264 ‚Äπ‚â§‚Ä∫  GC=Sm    LESS-THAN OR EQUAL TO
   2   7.42%  25.97%  U+000A0  ‚ßÜ   GC=Zs    NO-BREAK SPACE                        32   0.44%  88.72%  U+000AE ‚Äπ¬Æ‚Ä∫  GC=So    REGISTERED SIGN
   3   7.03%  33.01%  U+000B1 ‚Äπ¬±‚Ä∫  GC=Sm    PLUS-MINUS SIGN                       33   0.43%  89.15%  U+000E4 ‚Äπ√§‚Ä∫  GC=Ll    LATIN SMALL LETTER A WITH DIAERESIS
   4   5.46%  38.47%  U+02212 ‚Äπ‚àí‚Ä∫  GC=Sm    MINUS SIGN                            34   0.42%  89.57%  U+02020 ‚Äπ‚Ä†‚Ä∫  GC=Po    DAGGER
   5   4.20%  42.66%  U+02003  ‚ßÜ   GC=Zs    EM SPACE                              35   0.41%  89.98%  U+003B4 ‚ÄπŒ¥‚Ä∫  GC=Ll    GREEK SMALL LETTER DELTA
   6   3.68%  46.35%  U+003BC ‚ÄπŒº‚Ä∫  GC=Ll    GREEK SMALL LETTER MU                 36   0.37%  90.35%  U+000E1 ‚Äπ√°‚Ä∫  GC=Ll    LATIN SMALL LETTER A WITH ACUTE
   7   3.62%  49.97%  U+003B2 ‚ÄπŒ≤‚Ä∫  GC=Ll    GREEK SMALL LETTER BETA               37   0.34%  90.69%  U+02192 ‚Äπ‚Üí‚Ä∫  GC=Sm    RIGHTWARDS ARROW
   8   3.57%  53.53%  U+003B1 ‚ÄπŒ±‚Ä∫  GC=Ll    GREEK SMALL LETTER ALPHA              38   0.33%  91.02%  U+000ED ‚Äπ√≠‚Ä∫  GC=Ll    LATIN SMALL LETTER I WITH ACUTE
   9   3.43%  56.96%  U+0200A  ‚ßÜ   GC=Zs    HAIR SPACE                            39   0.31%  91.33%  U+003C3 ‚ÄπœÉ‚Ä∫  GC=Ll    GREEK SMALL LETTER SIGMA
  10   3.22%  60.18%  U+000B0 ‚Äπ¬∞‚Ä∫  GC=So    DEGREE SIGN                           40   0.30%  91.62%  U+000C5 ‚Äπ√Ö‚Ä∫  GC=Lu    LATIN CAPITAL LETTER A WITH RING ABOVE
  11   2.93%  63.11%  U+02009  ‚ßÜ   GC=Zs    THIN SPACE                            41   0.29%  91.92%  U+003BB ‚ÄπŒª‚Ä∫  GC=Ll    GREEK SMALL LETTER LAMDA
  12   2.62%  65.73%  U+02019 ‚Äπ‚Äô‚Ä∫  GC=Pf    RIGHT SINGLE QUOTATION MARK           42   0.29%  92.21%  U+000F3 ‚Äπ√≥‚Ä∫  GC=Ll    LATIN SMALL LETTER O WITH ACUTE
  13   2.51%  68.24%  U+02032 ‚Äπ‚Ä≤‚Ä∫  GC=Po    PRIME                                 43   0.26%  92.47%  U+02122 ‚Äπ‚Ñ¢‚Ä∫  GC=So    TRADE MARK SIGN
  14   2.44%  70.68%  U+000D7 ‚Äπ√ó‚Ä∫  GC=Sm    MULTIPLICATION SIGN                   44   0.26%  92.73%  U+02236 ‚Äπ‚à∂‚Ä∫  GC=Sm    RATIO
  15   2.04%  72.72%  U+0201D ‚Äπ‚Äù‚Ä∫  GC=Pf    RIGHT DOUBLE QUOTATION MARK           45   0.22%  92.95%  U+003C7 ‚Äπœá‚Ä∫  GC=Ll    GREEK SMALL LETTER CHI
  16   2.04%  74.76%  U+0201C ‚Äπ‚Äú‚Ä∫  GC=Pi    LEFT DOUBLE QUOTATION MARK            46   0.21%  93.17%  U+02021 ‚Äπ‚Ä°‚Ä∫  GC=Po    DOUBLE DAGGER
  17   1.54%  76.30%  U+00394 ‚ÄπŒî‚Ä∫  GC=Lu    GREEK CAPITAL LETTER DELTA            47   0.21%  93.37%  U+003C4 ‚ÄπœÑ‚Ä∫  GC=Ll    GREEK SMALL LETTER TAU
  18   1.42%  77.71%  U+000B5 ‚Äπ¬µ‚Ä∫  GC=Ll    MICRO SIGN                            48   0.20%  93.57%  U+003B8 ‚ÄπŒ∏‚Ä∫  GC=Ll    GREEK SMALL LETTER THETA
  19   1.34%  79.05%  U+003B3 ‚ÄπŒ≥‚Ä∫  GC=Ll    GREEK SMALL LETTER GAMMA              49   0.20%  93.77%  U+003B5 ‚ÄπŒµ‚Ä∫  GC=Ll    GREEK SMALL LETTER EPSILON
  20   1.21%  80.26%  U+000E9 ‚Äπ√©‚Ä∫  GC=Ll    LATIN SMALL LETTER E WITH ACUTE       50   0.18%  93.95%  U+02026 ‚Äπ‚Ä¶‚Ä∫  GC=Po    HORIZONTAL ELLIPSIS
  21   1.15%  81.41%  U+02014 ‚Äπ‚Äî‚Ä∫  GC=Pd    EM DASH                               51   0.16%  94.11%  U+02211 ‚Äπ‚àë‚Ä∫  GC=Sm    N-ARY SUMMATION
  22   1.14%  82.55%  U+02018 ‚Äπ‚Äò‚Ä∫  GC=Pi    LEFT SINGLE QUOTATION MARK            52   0.15%  94.26%  U+003C0 ‚ÄπœÄ‚Ä∫  GC=Ll    GREEK SMALL LETTER PI
  23   1.00%  83.54%  U+000A9 ‚Äπ¬©‚Ä∫  GC=So    COPYRIGHT SIGN                        53   0.15%  94.40%  U+000EF ‚Äπ√Ø‚Ä∫  GC=Ll    LATIN SMALL LETTER I WITH DIAERESIS
  24   0.71%  84.25%  U+02265 ‚Äπ‚â•‚Ä∫  GC=Sm    GREATER-THAN OR EQUAL TO              54   0.15%  94.55%  U+000A7 ‚Äπ¬ß‚Ä∫  GC=So    SECTION SIGN
  25   0.60%  84.85%  U+000F6 ‚Äπ√∂‚Ä∫  GC=Ll    LATIN SMALL LETTER O WITH DIAERESIS   55   0.15%  94.70%  U+02005  ‚ßÜ   GC=Zs    FOUR-PER-EM SPACE
  26   0.60%  85.45%  U+000B7 ‚Äπ¬∑‚Ä∫  GC=Po    MIDDLE DOT                            56   0.14%  94.84%  U+003C9 ‚Äπœâ‚Ä∫  GC=Ll    GREEK SMALL LETTER OMEGA
  27   0.60%  86.05%  U+02022 ‚Äπ‚Ä¢‚Ä∫  GC=Po    BULLET                                57   0.14%  94.98%  U+000E8 ‚Äπ√®‚Ä∫  GC=Ll    LATIN SMALL LETTER E WITH GRAVE
  28   0.59%  86.64%  U+0223C ‚Äπ‚àº‚Ä∫  GC=Sm    TILDE OPERATOR                        58   0.13%  95.12%  U+000F8 ‚Äπ√∏‚Ä∫  GC=Ll    LATIN SMALL LETTER O WITH STROKE
  29   0.57%  87.22%  U+003BA ‚ÄπŒ∫‚Ä∫  GC=Ll    GREEK SMALL LETTER KAPPA              59   0.13%  95.24%  U+003C1 ‚ÄπœÅ‚Ä∫  GC=Ll    GREEK SMALL LETTER RHO
  30   0.57%  87.79%  U+000FC ‚Äπ√º‚Ä∫  GC=Ll    LATIN SMALL LETTER U WITH DIAERESIS   60   0.13%  95.37%  U+000E3 ‚Äπ√£‚Ä∫  GC=Ll    LATIN SMALL LETTER A WITH TILDE </pre></font>

</div>
<div class="slide">
<h1>PMC: Astral Projections

</h1><p>Here are that corpus‚Äôs code points above the BMP, in order of popularity. Note üëΩ Area 51 !

</p><font size="4">
<!-- You know, I *so* wanted to properly write "corporis" there instead of 
     "corpus's" as the genitive of the 3rd declension singular "corpus".  
     But then if I ever had to form a genitive out of the plural "corpora", 
     that would then have to be "corporum", and then I'd just have to go 
     all corpse-like rather than ever explain it to anyone still living. 
     But it really hurts to write about these corpora's problems, because
     it looks singular but isn't.  Happy Easter, Damian.
-->

<pre>  1  U+01D49E ‚Äπùíû‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL C        31  U+01D4C2 ‚ÄπùìÇ‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL M
  2  U+01D4AF ‚ÄπùíØ‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL T        32  U+01D54D ‚Äπùïç‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL V
  3  U+01D4AE ‚ÄπùíÆ‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL S        33  U+01D4B6 ‚Äπùí∂‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL A
  4  U+01D49F ‚Äπùíü‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL D        34  U+01D4BE ‚Äπùíæ‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL I
  5  U+01D4B3 ‚Äπùí≥‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL X        35  U+01D4CC ‚Äπùìå‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL W
  6  U+01D4A9 ‚Äπùí©‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL N        36  U+01D516 ‚Äπùîñ‚Ä∫  GC=Lu    MATHEMATICAL FRAKTUR CAPITAL S
  7  U+01D4AB ‚Äπùí´‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL P        37  U+01D4CF ‚Äπùìè‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL Z
  8  U+01D4A2 ‚Äπùí¢‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL G        38  U+01D53B ‚Äπùîª‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL D
  9  U+01D49C ‚Äπùíú‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL A        39  U+01D54B ‚Äπùïã‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL T
 10  U+01D53C ‚Äπùîº‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL E 40  U+01D4BB ‚Äπùíª‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL F
 11  U+01D4AA ‚Äπùí™‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL O        41  U+01D4CA ‚Äπùìä‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL U
 12  U+01D4A5 ‚Äπùí•‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL J        42  U+01D507 ‚Äπùîá‚Ä∫  GC=Lu    MATHEMATICAL FRAKTUR CAPITAL D
 13  U+01D4A6 ‚Äπùí¶‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL K        43  U+01D542 ‚ÄπùïÇ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL K
 14  U+01D4B1 ‚Äπùí±‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL V        44  U+01D546 ‚ÄπùïÜ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL O
 15  U+01D4B2 ‚Äπùí≤‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL W        45  U+01D4BD ‚ÄπùíΩ‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL H
 16  U+01D4B4 ‚Äπùí¥‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL Y        46  U+01D4C5 ‚ÄπùìÖ‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL P
 17  U+01D4B5 ‚Äπùíµ‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL Z        47  U+01D505 ‚ÄπùîÖ‚Ä∫  GC=Lu    MATHEMATICAL FRAKTUR CAPITAL B
 18  U+01D4B0 ‚Äπùí∞‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL U        48  U+01D50E ‚Äπùîé‚Ä∫  GC=Lu    MATHEMATICAL FRAKTUR CAPITAL K
 19  U+01D4AC ‚Äπùí¨‚Ä∫  GC=Lu    MATHEMATICAL SCRIPT CAPITAL Q        49  U+01D541 ‚ÄπùïÅ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL J
 20  U+01D54A ‚Äπùïä‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL S 50  U+01D543 ‚ÄπùïÉ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL L
 21  U+01D539 ‚Äπùîπ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL B 51  U+100002  ‚ßÜ   GC=Co    &lt;private use code point in plane 16>
 22  U+01D5A7 ‚Äπùñß‚Ä∫  GC=Lu    MATHEMATICAL SANS-SERIF CAPITAL H    52  U+01D4B8 ‚Äπùí∏‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL C
 23  U+01D517 ‚Äπùîó‚Ä∫  GC=Lu    MATHEMATICAL FRAKTUR CAPITAL T       53  U+01D4C1 ‚ÄπùìÅ‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL L
 24  U+01D4C3 ‚ÄπùìÉ‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL N          54  U+01D53D ‚ÄπùîΩ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL F
 25  U+01D535 ‚Äπùîµ‚Ä∫  GC=Ll    MATHEMATICAL FRAKTUR SMALL X         55  U+01D53E ‚Äπùîæ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL G
 26  U+01D4BF ‚Äπùíø‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL J          56  U+01D54C ‚Äπùïå‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL U
 27  U+01D540 ‚ÄπùïÄ‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL I 57  U+01D6A4 ‚Äπùö§‚Ä∫  GC=Ll    MATHEMATICAL ITALIC SMALL DOTLESS I
 28  U+01D465 ‚Äπùë•‚Ä∫  GC=Ll    MATHEMATICAL ITALIC SMALL X          58  U+01D7D9 ‚Äπùüô‚Ä∫  GC=Nd    MATHEMATICAL DOUBLE-STRUCK DIGIT ONE
 29  U+01D4CE ‚Äπùìé‚Ä∫  GC=Ll    MATHEMATICAL SCRIPT SMALL Y
 30  U+01D538 ‚Äπùî∏‚Ä∫  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL A </pre></font>

</div>
<div class="slide">
<h1>PMC: Graphemes <i>&</i> Ideographs

</h1><ul><li level="1">PMC has plenty of ‚Äúextended grapheme clusters‚Äù, glyphs
that occupy more than one code point. You 
must make sure never to split up graphemes.  Code points with the property 
<code>Bidi_Class=Nonspacing_Mark</code>
(<code>BC=NSM</code> for short) are here in abundance: 
<code>‚óåÃÇ</code>,
<code>‚óåÃÖ</code>,
<code>‚óåÃÑ</code>,
<code>‚óåÃá</code>,
<code>‚óåÃÉ</code>,
<code>‚óå‚Éó</code>,
<code>‚óå‚Éû</code>,
<code>‚óåÃ≤</code>,
<code>‚óåÃÄ</code>,
<code>‚óåÕÇ</code>,
<code>‚óåÃÅ</code>,
<code>‚óåÃä</code>,
<code>‚óåÃÜ</code>,
<code>‚óåÔ∏Ä</code>,
<code>‚óåÃµ</code>,
<code>‚óåÃë</code>,
<code>‚óåÃß</code>,
<code>‚óå‚Éë</code>,
<code>‚óåÃ£</code>,
<code>‚óåÃà</code>,
<code>‚óåÃ£</code>,
<code>‚óåÃ∑</code>,
<code>‚óåÕÅ</code>,
<code>‚óåÃã</code>,
<code>‚óåÃå</code>,
<code>‚óåÕò</code>,
<code>‚óå‚Éõ</code>,
<code>‚óå÷ó</code>,
<code>‚óåÃ®</code>,
<code>‚óåÕÉ</code>,
<code>‚óåÕÑ</code>,
<code>‚óåŸí</code>, and
<code>‚óå‡æû</code>.

</li><li level="1">You get to deal with CJK uniÔ¨Åed ideographs like

<font face="'Kozunka Mincho Pro', 'LiSong Pro', serif">
ÊâÄ
Êñá
Êúâ
Ê¢ù
Áç®
Á•¥
Ëà∞
Ëúì
Èûí
Èûî
„õß
„õ®
„õ©
„õ™
„õ´
„õ¨
„õ≠
„õÆ
„õØ
„¨í
„¨°
</font>

</li><li level="1">And then there‚Äôs Hangul like

<font face="'Adobe Myungjo Std', 'Kozunka Mincho Pro', 'LiSong Pro', serif">
Í∞Ä
Í∞Ñ
Í≤É
Í≤å
Í≤Ω
Í≥º
Íµ¨
Í∑ú
Íπå
ÎÇ∏
Îäê
Îãà
Îãπ
Îçî
ÎèÑ
Îêò
Îêú
Îê©
Îì§
Îïå
Îùº
Îûå
Î†∏
Î°ù
Î•ò
Îßå
Îßê
Î©¥
Î™®
ÎØ∏
Î∞∞
Î≥∏
Î∂Ñ
ÏÇ¨
ÏÉù
ÏÑ†
ÏÑ±
ÏÑ∏
Ïàò
Ïä∑
Ïã†
Ïã≠
Ïì∞
Ïî©
ÏïÑ
ÏïΩ
Ïñ¥
Ïó¨
Ïò§
Ïô∏
Ïö∏
ÏùÄ
Ïùå
Ïùò
Ïù∏
ÏùΩ
Ïûà
Ïûò
Ï†Å
Ï†ï
Ï£º
ÏßÄ
Ïµú
Ïπú
Ìäπ
Ìïò
Ìïú
Ìï≠
Ìò∏
ÌõÑ
</font>

</li></ul></div>
<div class="slide">
<h1>Feature Support Summary

</h1><p>Here‚Äôs what each language natively supports <i>in its standard distribution</i>.
A white check mark isn‚Äôt quite all there, and a superscripted plus
says it goes <i>beyond</i> what‚Äôs stated. üåü 

</p><font size="3">
<table>
<table border=4 cellspacing=2 cellpadding=5 align=center>

<tr>
<th><i>Unicode</i></th>
<td>ùí•ùí∂ùìãùí∂ùìàùí∏ùìáùíæùìÖùìâ</td>
<td align=center><b>·¥ò ú·¥ò</b></td>
<th>Go</th>
<td>üíé  <b>Ruby</b></td>
<td>üêç  <b>Python</b></td>
<td>‚òï  <b>Java</b></th>
<td>üê™  <b>Perl</b></th>
</tr>


<tr> <th>Internally</th>
<td align=center>UCS‚Äê2 <i>or</i><br>UTF‚Äê16</td>      <!-- Javascript -->
<td align=center>UTF‚Äê8‚Åª</td>     <!-- PHP -->
<td align=center>UTF‚Äê8</td>      <!-- Go -->
<td align=center>varies</td>     <!-- Ruby -->
<td align=center>UCS‚Äê2 <i>or</i><br>UCS‚Äê4</td>      <!-- Python -->
<td align=center>UTF‚Äê16</td>     <!-- Java -->
<td align=center>UTF‚Äê8‚Å∫</td>     <!-- Perl -->
</tr>

<tr> <th>IdentiÔ¨Åers</th>
<td align=center>‚îÄ</td>         <!-- Javascript -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- PHP -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Go -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Ruby -->
<td align=center><font face="Symbola">‚úÖ</font><sup>‚àì</sup></td>         <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Java -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Perl -->
</tr>

<tr> <th>Casefolding</th>
<td align=center>none</td>        <!-- Javascript -->
<td align=center>simple</td>       <!-- PHP -->
<td align=center>simple</td>        <!-- Go -->
<td align=center>full</td>         <!-- Ruby -->
<td align=center>none</td>        <!-- Python -->
<td align=center>simple</td>       <!-- Java -->
<td align=center>full</td>         <!-- Perl -->
</tr>

<tr> <th>Casemapping</th>
<td align=center>simple</td>       <!-- Javascript -->
<td align=center>simple</td>       <!-- PHP -->
<td align=center>simple<sup>‚àì</sup></td>       <!-- Go -->
<td align=center>full</td>         <!-- Ruby -->
<td align=center>simple</td>       <!-- Python -->
<td align=center>full</td>         <!-- Java -->
<td align=center>full</td>         <!-- Perl -->
</tr>

<tr> <th>Graphemes</th>
<td align=center>‚îÄ</td>         <!-- Javascript -->
<td align=center><font face="Symbola">‚úÖ</font></td>        <!-- PHP -->
<td align=center>‚îÄ</td>        <!-- Go -->
<td align=center>‚îÄ</td>        <!-- Ruby -->
<td align=center>‚îÄ</td>         <!-- Python -->
<td align=center>‚îÄ</td>         <!-- Java -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Perl -->
</tr>

<tr> <th>Normalization</th>
<td align=center>‚îÄ</td>         <!-- Javascript -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- PHP -->
<td align=center>‚îÄ‚Å∫</td>         <!-- Go -->
<td align=center>‚îÄ</td>         <!-- Ruby -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Java -->
<td align=center><font face="Symbola">‚úî</font></td>         <!-- Perl -->
</tr>

<tr> <th>UCA Collation</th>
<td align=center>‚îÄ</td>         <!-- Javascript -->
<td align=center>‚îÄ</td>         <!-- PHP -->
<td align=center>‚îÄ</td>        <!-- Go -->
<td align=center>‚îÄ</td>        <!-- Ruby -->
<td align=center>‚îÄ</td>        <!-- Python -->
<td align=center>‚îÄ</td>        <!-- Java -->
<td align=center>‚úî‚Å∫</td>        <!-- Perl -->
</tr>

<tr> <th>Named Characters</th>
<td align=center>‚îÄ</td>         <!-- Javascript -->
<td align=center>‚îÄ</td>         <!-- PHP -->
<td align=center>‚îÄ</td>         <!-- Go -->
<td align=center>‚îÄ</td>         <!-- Ruby -->
<td align=center><font face="Symbola">‚úÖ</font></td>            <!-- Python -->
<td align=center>‚îÄ</td>         <!-- Java -->
<td align=center><font face="Symbola">‚úî</font>‚Å∫</td>        <!-- Perl -->
</tr>

<tr> <th>Properties</th>
<td align=center>‚îÄ</td>        <!-- Javascript -->
<td align=center>two</td>         <!-- PHP -->
<td align=center>(non‚Äêregex)‚Åª</td>         <!-- Go -->
<td align=center>three</td>         <!-- Ruby -->
<td align=center>(non‚Äêregex)‚Åª</td>                 <!-- Python -->
<td align=center>two‚Å∫</td>    <!-- Java -->
<td align=center>every‚Å∫</td>        <!-- Perl -->
</tr>

</table>
</font>

</div>
<div class="slide">
<h1>Unicode Properties in Regexes

</h1><p></p>

<font size="3">
<table>
<table border=4 cellspacing=2 cellpadding=4 align=center>


<tr>
<th><i>Property</i></th>
<th>Javascript</th>
<th>Javascript<br>w/<code>XRegExp</code></th>
<th>·¥ò ú·¥ò<sup>5</sup><br>w/<code>PCRE</code></th>
<th>Go<sup>5</sup><br>w/<code>RE2</code></th>
<th>Ruby<sup>1.9</sup></th>
<th>Python<sup>3.2</sup></th>
<th>Python<sup>3.2</sup><br>w/<code>regex</code></th>
<th>Java<sup>1.6</sup></th>
<th>Java<sup>1.7</sup></th>
<th>ICU</th>
<th>Perl</th>
</tr>



<tr>
<th>General Category</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Javascript w/XRegExp -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- PHP5 w/PCRE -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Ruby 1.9 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>Script</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Javascript w/XRegExp -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- PHP5 w/PCRE -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Go w/RE2 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>Two‚ÄêParters</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex --> 
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úÖ</font>‚Åª</td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>Long Names</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center>‚îÄ</td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>Loose Matching</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex --> 
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úÖ</font></td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>Name/Value Aliases</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úÖ</font></td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>User‚ÄêDeÔ¨Åned</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center>‚îÄ</td>  <!-- Python w/regex -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center>‚îÄ</td>  <!-- Java 1.7 -->
<td align=center>‚îÄ</td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>UTS#18 RL 1.2</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex --> 
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>UTS#18 RL 1.2<sup>a</sup></th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ<sup>?</sub></td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center><font face="Symbola">‚úÖ</font></td>  <!-- Ruby 1.9 -->
<td align=center><font face="Symbola">‚úÖ</font></td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font>‚Å∫</td>  <!-- Python w/regex -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>UTS#18 RL 2.2</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center><font face="Symbola">‚úÖ</font></td>   <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Python w/regex -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center>‚îÄ</td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

<tr> <th>UTS#18 RL 2.7</th>
<td align=center>‚îÄ</td>  <!-- Javascript -->
<td align=center>‚îÄ</td>  <!-- Javascript w/XRegExp -->
<td align=center>‚îÄ</td>  <!-- PHP5 w/PCRE -->
<td align=center>‚îÄ</td>  <!-- Go w/RE2 -->
<td align=center>‚îÄ</td>  <!-- Ruby 1.9 -->
<td align=center>‚îÄ</td>  <!-- Python -->
<td align=center><font face="Symbola">‚úÖ</font></td>  <!-- Python -->
<td align=center>‚îÄ</td>  <!-- Java 1.6 -->
<td align=center>‚îÄ</td>  <!-- Java 1.7 -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- ICU -->
<td align=center><font face="Symbola">‚úî</font></td>  <!-- Perl -->
</tr>

</table>
</font>

</div>
<div class="slide">
<h1>Conservation of Pain <i>&</i> SuÔ¨Äering?

</h1><ul><li level="1">There is no one ‚Äúright‚Äù answer in any of this.

</li><li level="1">Every language has its own set of Unicode ups and downs.

</li><li level="1">I‚Äôm not suggesting anyone exchange the devil they know for one they don‚Äôt.

</li><li level="1">That doesn‚Äôt mean all platforms are equal here.  Some really 
<i>are</i> more painful to use.

</li><li level="1">Certain common trends <i>do</i> emerge when you look across 
the language spectrum.

</li></ul></div>
<div class="slide">
<h1>Trends Across Languages

</h1><ul><li level="1">Languages with longer legacies have sizable pods of hysterical 
porpoises to appease, which newer languages may not. 

</li><li level="1">Compatibility with 8‚Äê and 
especially 16-bit character sets is a major drag.

</li><li level="1">Extending the repertoire to 21 bits doesn‚Äôt resolve broken
assumptions, because <b>Unicode is <i>much more</i> than just ‚Äúmore
characters‚Äù.</b>  Check out the blue boxes here to see what I mean:

<pre> http://unicode.org/charts/case/
 http://unicode.org/charts/case/chart_Latin.html </pre></li><li level="1">Try to get the latest releases of all these languages; it makes a big diÔ¨Äerence. 

</li><li level="1">For example, this talk originally included a bunch of pain about
Unicode in Python v2.7, but I deleted all the v2.7 material to get past the
profanity Ô¨Ålters.

</li></ul></div>
<div class="slide">
<h1>Javascript ‚â† Java‚Äôs Crypt

</h1><ul><li level="1">Javascript still uses (or <i>can</i> use: the standard allow for either UTF‚Äê16 <i>or</i> UCS‚Äê2) the broken and 
ancient UCS‚Äê2 ‚Äî which is <b><i>not a valid Unicode encoding!</i></b>

</li><li level="1">No support for named characters like <code>\N{WHITE SMILING FACE}</code>; you
must use magic numbers like <code>\u263A</code> instead.  Notice that‚Äôs not 
enough digits.

</li><li level="1">Because literals are speciÔ¨Åed using exactly four hex digits <code>\u<i>XXXX</i></code>,
Javascript supports only ¬π‚ÅÑ‚ÇÅ‚Çá·µó ∞ of Unicode, the 5.88% that occupies Plane Zero.  

</li><li level="1">The ·¥á·¥Ñ·¥ç·¥ÄScript standard wickedly deÔ¨Ånes string values <i>not</i> as sequences of 
characters, but rather as sequences of 16-bit ‚Äúcode units‚Äù.  

</li><li level="1">This is super‚Äênasty.  

</div>
<div class="slide">
<h1>The UTF‚Äê16 <i>n√©e</i> UCS‚Äê2 Curse

</h1><ul><li level="1">Like several other languages, Javascript suÔ¨Äers from <i>The UTF‚Äê16 Curse</i>.

</li><li level="1">Except that Javascript has an even worse form of it, <i>The UCS‚Äê2 Curse</i>.
Things like <code>charCodeAt</code> and <code>fromCharCode</code> only ever deal with 16‚Äêbit
quantities, not with real, 21‚Äêbit Unicode code points.

</li><li level="1">Therefore, if you want to print out something like ùíú, 
U+1D49C,  <code>MATHEMATICAL SCRIPT CAPITAL A</code>,
you have to specify not one character but 
two ‚Äúchar units‚Äù: <code>"\uD835\uDC9C"</code>.  üò± 

<pre> # ERROR!!
 document.write(String.fromCharCode(0x1D49C));

 # needed bogosity
 document.write(String.fromCharCode(0xD835,0xDC9C)); </pre></li></ul></div>
<div class="slide">
<h1>Testing for UTF‚Äê16 <i>vs</i> UCS‚Äê2 

</h1><ul><li level="1">You cannot write portable code because you cannot foresee which encoding
is used internally.

</li><li level="1">However, on any <i>given</i> Javascript interpreter, you can test for which
of the two you have this way:

<pre>    var div = document.createElement("DIV"); 
    div.innerHTML = "&amp;#0x10000;"; 
    var isUtf16 = div.firstChild.nodeValue.charCodeAt(0) == 0xd800; </pre></li></ul></div>
<div class="slide">
<h1>Javascript Regexes üëé 

</h1><ul><li level="1">Regex character classes are <i>still</i> ASCII only.  You can never
make <code>\w</code>, <code>\d</code>, <i>&c</i> work on trans‚ÄêASCII Unicode as <b>required</b> by
Unicode‚Äôs <i>UTS #18 Regular Expressions</i> in its <i>Annex C: Compatibility
Properties</i>.  This is a severe hardship.

</li><li level="1">You will never be able to write regexes like
<code>[ùíú-ùíµ]</code> since that gets misinterpreted as <code>[\uD835\uDC9C-\uD835\uDCB5]</code>.
Actually, you won‚Äôt even get that far:

<pre> new RegExp("[ùíú-ùíµ]", "i") returned a SyntaxError:
   RegExp constructor: invalid regular expression </pre></li><li level="1">A Javascript plugin exists that adds
support for three <b>(yes, <i>just</i> 3!)</b> Unicode properties
via <code>\p{<i>PROP</i>}</code> and <code>\P{<i>PROP</i>}</code>:

<pre> http://xregexp.com/plugins/ </pre><ul><li level="1">a <code><i>General Category</i></code> <b>abbreviation</b> like <code>\p{Sc}</code>

</li><li level="1">a <code><i>Script</i></code> name like <code>\p{Latin}</code>

</li><li level="1">a <code><i>Block</i></code> property like
<code>\p{InMathematicalAlphanumericSymbols}</code>  (except that one won‚Äôt work:
it lies outside the ¬π‚ÅÑ‚ÇÅ‚Çá·µó ∞ of Unicode Javascript can even think about)

</li></ul></div>
<div class="slide">
<h1>The <i>XRegExp</i> Plugin <i>(cont...)</i>

</h1><ul><li level="1">You still have to use obscenely ÔººÔººùïïùï†ùï¶ùïìùïùùïñùïï¬†¬†ÔººÔººùïìùïíùïîùïúùï§ùïùùïíùï§ùïôùïñùï§¬†¬†like

<pre>    XRegExp("[^\\p{Latin}\\p{Common}]"); </pre></li><li level="1">The <code>XRegExp</code> plugin doesn‚Äôt even support basic properties like <code>Alphabetic</code>,
<code>Uppercase</code>, and <code>Lowercase</code>, all required by UTS#18 for Level 1 Unicode Support.

</li><li level="1">It has no support for grapheme clusters whatsoever.

</li><li level="1">No matter what, you‚Äôre still stuck with only ¬π‚ÅÑ‚ÇÅ‚Çá·µó ∞ of Unicode ‚Äî which is simply 
not acceptable. 


</li><li level="1">How in the world are you ever going to fully deal with a real corpus 
like the one I showed at the start?

</li><li level="1">You aren‚Äôt.   

</li></ul></div>
<div class="slide">
<h1>PHP

</h1><ul><li level="1">PHP‚Åµ is a <i>little</i> better than Javascript,  but it will still
make you pull your hair out.

</li><li level="1">The fabled PHP‚Å∂ ‚Äúwith (full) Unicode support‚Äù seems to have been cancelled. 

</li><li level="1">PHP‚Äôs ‚Äúnew‚Äù <code>preg_*</code> functions indeed use PCRE.

</li><li level="1">However...

</li></ul></div>
<div class="slide">
<h1>PHP: PCRE Issues

</h1><ul><li level="1">Your version of PHP has to be linked with a version of PCRE that was
built with Unicode support in it; this is not the default.  

</li><li level="1">You still have to always, always remember to use <b><code>/u</code></b> on your
patterns to get the Unicode character sense instead of the ‚Äúbyte‚Äù sense.

</li><li level="1">You will never(?)
get <code>\w</code>, <code>\d</code>, <i>&c</i> to work the way UTS#18 says they must.  

</li><li level="1">Property support is limited to just two only: the <code><i>General Category</i></code> <b>abbreviations</b>
and the <code><i>Script</i></code> properties.

</li><li level="1">Its <code>\X</code> is the old broken <code>(?>\PM\pM*)</code>, which is üõÇ <i>not</i> üõÇ  
a Unicode grapheme cluster as currently deÔ¨Åned 
in UTS#18 <i>&</i> UTS#29.

</li></ul></div>
<div class="slide">
<h1>PHP: The Ugly News

</h1><ul><li level="1">PHP doesn‚Äôt really have native support for Unicode.

</li><li level="1">You must always ignore normal functions
like <code>strlen</code>, <code>strstr</code>, <code>strpos</code>, and <code>substr</code> 

</li><li level="1">Instead you have to remember to use
<code>mb_strlen</code>, <code>mb_strstr</code>, <code>mb_strpos</code>, and
<code>mb_substr</code> instead.

</li></ul></div>
<div class="slide">
<h1>PHP Titlecasing

</h1><ul><li level="1">Unlike Javascript, PHP actually makes a stab at titlecasing, something
required by Unicode. 

</li><li level="1">However it does simple casemapping only, never 
the default Unicode casemapping, which is full casemapping.   This is especially annoying with titlecasing.

</li><li level="1">That means you can correctly titlecase <i>«≥ur</i> <code>"\x{1F3}ur"</code> to <i>«≤ur</i> <code>"\x{1F2}ur"</code>:  

<pre> # PASS
 mb_convert_case("«≥ur", MB_CASE_TITLE, "UTF-8"); </pre></li><li level="1">But you cannot get  <i>√ü</i> <code>"\x{DF}"</code> to properly become <i>Ss</i>,
<i>Ô¨Åle</i> <code>"\x{FB01}le"</code> to become <i>Fi</i>, nor <i>Ô¨Öop</i> <code>"\x{FB05}op"</code> to become <i>Stop</i>.  

<pre> # FAIL
 mb_convert_case("Ô¨Öop", MB_CASE_TITLE, "UTF-8"); </pre></li></ul></div>
<div class="slide">
<h1>Go Figure!

</h1><ul><li level="1">Of all the languages I played around with for this talk, Go was
hands down the easiest ‚Äî and possibly the most pleasurable ‚Äî to 
use UTF‚Äê8 with.  

</li><li level="1">Go Ô¨Ågger.  üòâ  

</li><li level="1">Its 

<font face="junicode, sans, mono">·ö±·ö¢·õã·öæ·ö≤</font> heritage from Plan9 shows.  

</li><li level="1">This is hardly a bad thing.

</div>
<div class="slide">
<h1>Go: The Good News

</h1><ul><li level="1">It‚Äôs new.

</li><li level="1">No special syntax, declarations, functions, <i>&c</i> are needed to
get any and all of Go to work with Unicode in its

<ul><li level="1">source code

</li><li level="1">program identiÔ¨Åers

</li><li level="1">character or string literals

</li><li level="1">casing

</li><li level="1">regexes

</li><li level="1">I/O streams

</li></ul></li><li level="1">This is both exciting and encouraging.

</li></ul></div>
<div class="slide">
<h1>Go: The Bad News

</h1><ul><li level="1">It‚Äôs new.  (Yes, I know I said that already.)

</li><li level="1">Standard libraries for key Unicode components lag.

<ul><li level="1">Normalization ‚Äî standard library <i>almost</i> there.

</li><li level="1">Collation ‚Äî is in the make, but collation is harder yet
essential, because comparison underlies nearly everything we do with text.

</li><li level="1">Regexes ‚Äî a new standard library, equivalent  to 
Russ Cox‚Äôs <i>RE2</i> library, is currently 
 imported as <code>exp/regexp</code>.  It provides for (simple) Unicode casefolding and
includes access to the Unicode <code>General Category</code> and <code>Script</code> properties.

</li></ul></li></ul></div>
<div class="slide">
<h1>Go: The Ugly News

</h1><ul><li level="1">This is Go: it doesn‚Äôt do ugly.

</li></ul></li></ul></div>
<div class="slide">
<h1>Ruby: The Bad News

</h1><ul><li level="1">Fresh out of the box, Ruby at Ô¨Årst <i>appears</i> so broken <i>vis‚Äê√†‚Äêvis</i> Unicode
as to be unusable.  

</li><li level="1">It treats your source code as being in some nonportable local encoding.  

</li><li level="1">Its <code>String</code> functions like <code>upcase</code> or <code>capitalize</code> won‚Äôt even look
at anything but ASCII. 

</li><li level="1">Its regexes ignore your Unicode.   

</li><li level="1">It‚Äôs completely missing <i>a whole lot</i> of critical Unicode functionality:  

<ul><li level="1">casemapping <i>&</i> -folding

</li><li level="1">grapheme support

</li><li level="1">normalization

</li><li level="1">collation

</li><li level="1">text segmentation,
<i>&c</i>
<i>&c</i>
<i>&c</i>.

</li></ul></div>
<div class="slide">
<h1>Ruby: The Ugly News

</h1><ul><li level="1">Every Ruby string carries around its encoding, instead of sanely unifying
into Unicode internally like nearly everything else does.  

</li><li level="1">Supposedly this is to avoid round‚Äêtrip losses in certain legacy Asian encodings
that would otherwise lose information due to <i>‚ÄúHan UniÔ¨Åcation‚Äù</i>.   
(If you <i>don‚Äôt</i> know what that means, consider yourself lucky. Very lucky.)

</li><li level="1">Because of this ugliness, you might <i>think</i> things like <code>\p{Lu}</code> 
are Ô¨Åne in your regexes because they work on your system ‚Äî under a UTF‚Äê8 locale.  
Now. But move the script to something laboring under CP1252 and suddenly you 
have an error!   

</li><li level="1">Indeed the same pattern that runs on one string may blow up on another
all in the same program.

</li><li level="1">You seem(?) to be able to avoid this by always using the <b><code>/u</code></b> regex Ô¨Çag.

</li></ul></div>
<div class="slide">
<h1>Ruby: The Good News

</h1><ul><li level="1">However, it turns out that Ruby is one of the better choices for Unicode work.  

</li><li level="1">If you want to work with Unicode in Ruby, then you <i>must</i> use v1.9 or
better.  Don‚Äôt even dream of using anything less.  

</li><li level="1">Declare your source code to be UTF‚Äê8 with a signiÔ¨Åcant
comment as the Ô¨Årst line:

<pre>  #!/usr/bin/env ruby
  #coding: utf-8 </pre></li><li level="1">Ruby even allows proper Unicode identiÔ¨Åers.  

<pre> #!/usr/bin/env ruby
 #coding: utf-8
 ùîòùî´ùî¶ùî†ùî¨ùî°ùî¢   = "super";       puts ùîòùî´ùî¶ùî†ùî¨ùî°ùî¢
 ni√±o    = "boy";           puts ni√±o
 both    = ùîòùî´ùî¶ùî†ùî¨ùî°ùî¢ + ni√±o;  puts both  
 
 # Yep, it‚Äôs superboy! </pre></li></ul></div>
<div class="slide">
<h1>Ruby: The Best News

</h1><ul><li level="1">The solution to the Ruby ‚Äúbad news‚Äù in the last bullet three
slides ago is to install the <code>unicode_utils</code> gem, available via <code>gem
ininstall unicode_utils</code> or from

<pre> http://unicode-utils.rubyforge.org/ </pre></li><li level="1">The library includes support for Unicode normalization, character names, 
graphemes, combining classes, casefolding, and casemapping. 

</li><li level="1">For example, Ruby now does full and correct casemapping ‚Äî <i>provided</i> you use it this way:

<pre>  #!/usr/bin/env ruby
  #coding: utf-8
  require 'unicode_utils'
  puts "lower is " + UnicodeUtils.downcase(str)
  puts "title is " + UnicodeUtils.titlecase(str)
  puts "upper is " + UnicodeUtils.upcase(str) </pre></li></ul></div>
<div class="slide">
<h1>Ruby Regexes: Good News...

</h1><ul><li level="1">Unlike anything we‚Äôve looked at so far, Ruby actually implements
full Unicode case<i>folding</i> in its regexes:

<pre>  % ruby -le 'print " WEISS" =~ /wei√ü/i'
  1 </pre></li><li level="1">Or, in a longer example:

<pre>    #!/usr/bin/env ruby
    #coding: utf-8

    str = " ·æ≤ œÉœÑŒø Œ¥ŒπŒ¨ŒøŒªŒø";
    puts str =~ /·æ∫Œô Œ£Œ§Œü ŒîŒôŒÜŒüŒõŒü/i ? "PASS" : "FAIL";
 PASS </pre></li></ul></div>
<div class="slide">
<h1>Ruby Regexes: ...and Bad News 

</h1><ul><li level="1">Unfortunately, regexes are just where Ruby‚Äôs Unicode
support is weakest.  

</li><li level="1">Only two properties are supported: <code>General Category</code> and <code>Script</code>.

</li><li level="1">It fails to correctly implement UTS#18‚Äôs RL1.2a: that means
your <code>\w</code>, <code>\d</code>, <i>&c</i> won‚Äôt work right, and even <code>\p{alphabetic}</code> is broken.  

</li><li level="1"><code>\w</code> won‚Äôt work except on ASCII, even with the <code>/u</code> Ô¨Çag. 

</li><li level="1">Ruby seems to make up its own rules about what some of its properties
mean instead of using Unicode‚Äôs rules.  <b>You aren‚Äôt allowed to use the same property 
name with a diÔ¨Äerent meaning than the oÔ¨Écial one.</b>  This is a violation. üõÇ

</li></ul></div>
<div class="slide">
<h1>Python: (Some) Good News 

</h1><ul><li level="1">Python v3 is the Ô¨Årst language so far discussed with <i>any</i> builtin support
for Unicode named characters, <i>e.g.,</i> <code>\N{GREEK SMALL LETTER FINAL SIGMA}</code>
for U+03C2, <i>œÇ</i>.  

</li><li level="1">This is good because it frees you from magic numbers without making
you use Unicode literals that might be lookalikey, <i>e.g.,</i> 
<code>\N{GREEK SMALL LETTER STIGMA}</code> for U+03DB, <i>œõ</i>.  ¬†¬†¬†

</li><li level="1">However, it does not support 
the named sequences described by Unicode v5,
like <code>\N{LATIN CAPITAL LETTER A WITH MACRON AND GRAVE}</code>.  

</li><li level="1">Admittedly, this is a comparitively
new feature that probably hasn‚Äôt yet seen a lot of demand.  
Perl <i>does</i> support them, however:

<font size="5">

<pre> % perl5.14.0 -Mcharnames=:full -le 'print("\N{LATIN CAPITAL LETTER A WITH MACRON AND GRAVE}")'
 ƒÄÃÄ

 % perl5.14.0 -Mcharnames=:full -le 'print("\N{LATIN CAPITAL LETTER A WITH MACRON AND GRAVE}")' | uniquote -v
 \N{LATIN CAPITAL LETTER A WITH MACRON}\N{COMBINING GRAVE ACCENT} </pre></font>

</div>
<div class="slide">
<h1>Python: Not Good News

</h1><ul><li level="1">Unicode in Python v2.7 is way Murphian; 
use v3.2 and your Unicode life will be... well, less troubled.  

</li><li level="1">Python has no support for graphemes clusters, without which it 
is virtually impossible to correctly process Unicode text.

</li><li level="1">Python does not include a standard module for Unicode collation.  

</li><li level="1">Python‚Äôs standard <code>re</code> library is really quite deÔ¨Åcient from 
a Unicode perspective.  

</li><li level="1">However, if you
use <code>re.U</code>, then your <code>\w</code>, <code>\d</code>, <i>&c</i> actually <i>do</i> work according to UTS#18.
Mostly.  

</div>
<div class="slide">
<h1>Python Regexes: The Bad News

</h1><ul><li level="1">The Python <code>re</code> library doesn‚Äôt oÔ¨Äer <i>any</i> Unicode properties. 

</li><li level="1">It doesn‚Äôt understand graphemes. 

</li><li level="1">It doesn‚Äôt do casefolding.  <i>At all!</i> Not simple, and not full.    

</li><li level="1">Rather,  it mistakenly applies case<i>mapping</i> instead of case<i>folding</i>, 
and therefore sometimes gets the wrong answer, failing to match such things as:

<ul><li level="1">The U+00BC <i>¬µ</i> micro sign and either Greek mu, whether <i>Œº</i> or <i>Œú</i>.

</li><li level="1">U+0175, <code>LATIN SMALL LETTER LONG S</code> <i>≈ø</i> (as in the old‚Äêstyle <i>po≈øt</i>) and either of 
the regular versions, whether <i>S</i> or <i>s</i>.

</li><li level="1">The regular Greek lowercase sigma, <i>œÉ</i>, whether
the Ô¨Ånal sigma, <i>œÇ</i>,
or the uppercase one, <i>Œ£</i>.

</li><li level="1">The Greek ‚Äúiota subscript‚Äù, 
<code>COMBINING GREEK YPOGEGRAMMENI</code>, ‚óåÕÖ , and any other iota like 
<code>GREEK CAPITAL LETTER IOTA</code> <i>Œô</i>,
<code>GREEK SMALL LETTER IOTA</code> <i>Œπ</i>, or
<code>GREEK PROSGEGRAMMENI</code> <i>Œπ</i>.

</li></ul></div>
<div class="slide">
<h1>Python Regexes: The Good News

</h1><ul><li level="1">Matthew Barnett has a <i>very</i> interesting replacement library for the
lame <code>re</code> module Python comes with, for both v2 and v3.   

</li><li level="1">It not only handles Unicode better (read: <i>at all</i>),
it has lots of other super‚Äêneat features found in no other regex library anywhere.  

</li><li level="1">It supports Unicode graphemes, boundaries,
<i>does</i> do (simple) casefolding, doesn‚Äôt require a Unicode Ô¨Çag for 
Unicode charclasses, <i>&c</i>.

</li><li level="1">Property support goes <i>far</i>
beyond RL1.2‚Äôs required 11, with 67 properties supported as of this writing.
This makes a huge diÔ¨Äerence in real processing.

<pre>  http://pypi.python.org/pypi/regex </pre></li></ul></div>
<div class="slide">
<h1>Python: The Ugly Bits

</h1><ul><li level="1">Python uses the antiquated and broken UCS‚Äê2 ‚Äî <i>er,</i> except when it uses UCS‚Äê4.
This is a <i>super‚Äêmassive</i> problem.   üíÄ

</li><li level="1">Because you <i>cannot count on having a wide build</i> so
you can have UCS‚Äê4, you cannot reliably use Python on general Unicode such
as the corpus I showed earlier.  

</li><li level="1">Python plays naughty guessing games with encodings, causing programs to
act diÔ¨Äerently when redirected. 

</li><li level="1">Although you <i>can</i> have a variable named <code>√©cran</code> or
<code>el_ni√±o</code>,  or even
<code>Êù±‰∫¨</code> or <code>ÊñáÂ≠óÂåñ„Åë</code>,
the UCS‚Äê2 Curse prevents having one named <code>ùîòùî´ùî¶ùî†ùî¨ùî°ùî¢</code>, let alone
<code>êêîêêØêëÖêê®êëâêêØêêª</code> or 

<code><font face="Monaco,  'Courier', 'Courier New', Mono">êå∞êçÑêçÑêå∞‚ÄøêåøêåΩêçÉêå∞êçÇ‚Äøêå∏êåø‚ÄøêåπêåΩ‚Äøêå∑êåπêåºêåπêåΩêå∞êåº</font></code>. (This has just been fixed [2011-08-11])

</li><li level="1"><code>Atta_unsar_</code>‚Ää<code>√æu_in_himinam</code> is ok, though.  

</li></ul></div>
<div class="slide">
<h1>Testing for  UCS‚Äê2 <i>vs</i> UCS‚Äê4 

</h1><ul><li level="1">As with Javascript, you cannot rely on all Python interpreters 
using one or another internal representation.

</li><li level="1">However, here again you can determine which you have on 
any given system.  

<pre> import sys
 wide_enough = (sys.maxunicode >= 0x10FFFF)
 print("my largest character is",  sys.maxunicode) </pre></li><li level="1">On a wide build, <code>sys.maxunicode</code> is 0x10FFFF, 
whereas it is otherwise only 0xFFFF.

</li><li level="1">That way you can abort unless you‚Äôre on a wide build.

<pre> if not wide_enough:
     raise Exception("Narrow build lacks full Unicode support") </pre></div>
<div class="slide">
<h1>Fixing Python Redirection Troubles

</h1><ul><li level="1">You <i>can</i> set the <code>PYTHONIOENCODING</code> environment variable so it stops guessing.
(This is like setting <code>PERL_UNICODE</code> to <code>S</code>.)

<pre> $ export PYTHONIOENCODING=utf8 </pre></li><li level="1">By default, <code>stdin</code> and <code>stdout</code> encoding errors raise exceptions,
but those on <code>stderr</code> do not.

</li><li level="1">To override all reliance on guessing or your environment, your program can do 
something like this (in Python v3):

<pre> import io
 import sys
 for s in ("stdin","stdout","stderr"):
     setattr(sys, s, io.TextIOWrapper(getattr(sys, s).detach(), encoding="utf8")) </pre></li><li level="1">I can‚Äôt actually syntax‚Äêcheck that previous block by doing a
<code>{!}python</code> from within <i>vi</i> on the pod source, darn it!!

</li></ul></div>
<div class="slide">
<h1>Python: A Complete Solution?

</h1><p>Even üêç·µõ¬≥ + <code>regex</code>  cannot Ô¨Åx all üêç·µõ¬≤  Unicode problems, because üêç‚Äôs
character model is inherently broken.  It completely violates UTS#18‚Äôs 
Level 1 requirement for regular expressions ‚Äî the <i>minimal</i> level for useful Unicode support ‚Äî
that the engine support Unicode characters as <b>basic logical units <i>independent of serialization</i> like UTF‚Äë*</b>:

</p><font size="4">

<pre> % python3.2
 Python 3.2 (r32:88445, Jul 21 2011, 14:44:19)
 [GCC 4.2.1 (Apple Inc. build 5664)] on darwin
 Type "help", "copyright", "credits" or "license" for more information.
 >>> import re
 >>> g = "\N{GREEK SMALL LETTER ALPHA WITH VARIA AND YPOGEGRAMMENI}"
 >>> print(g)
·æ≤
 >>> print(re.search(r'\w', g))
 &lt;_sre.SRE_Match object at 0x10051f988>
 >>> p = "\N{MATHEMATICAL SCRIPT CAPITAL P}"
 >>> print(p)
ùí´
 >>> print(re.search(r'\w', p))
None
 >>> print(re.search(r'..', p))   # ‚Üê ùôèùôÉùôÑùôé¬†ùôÑùôé¬†ùôèùôÉùôÄ¬†ùôëùôÑùôäùôáùòºùôèùôÑùôäùôâ¬†ùôçùôÑùôÇùôÉùôè¬†ùôÉùôÄùôçùôÄ 
&lt;_sre.SRE_Match object at 0x10051f988>
 >>> print(len(chr(0x1D4AB)))
2 </pre></font>

</div>
<div class="slide">
<h1>Java

</h1><ul><li level="1">Java‚Äôs Unicode support has a lot to be said about it, most of which wouldn‚Äôt
pass muster with the potty-mouth police.    üîû  

</li><li level="1">It‚Äôs still a whole lot better than Python, though, because Java <i>demonstrably 
cares</i> about conformance with The Unicode Standard.

</li><li level="1">Then again, Oracle pays people to work on the Java core, despite the OpenJDK.
Few other languages (apart perhaps from Google‚Äôs Go) enjoy such support.

</div>
<div class="slide">
<h1>Java: The Ugly News

</h1><ul><li level="1">Although it has several, Java‚Äôs <i>biggest</i> Unicode problem is that
you cannot store a character in a <code>char</code>,
nor in a <code>Character</code> for that matter.  üöΩ

</li><li level="1">You have to use an <code>int</code> or a <code>String</code>:  üëâ  <i>‚Äúint is the new char.‚Äù</i> 

</li><li level="1">Functions that deal
with <code>char</code>s <b><i>do not</i> deal with Unicode characters</b>:  <code>String.length</code>
must be replaced by <code>codePointCount</code>, <code>charAt</code> by <code>codePointAt</code>, <i>&c</i>.

</li><li level="1">Many classes simply have no ‚Äúcode point‚Äù (<i>i.e.,</i> Unicode character) interfaces at all.

</li><li level="1">This is all extremely error‚Äêprone and unpleasant ‚Äî <i>at best</i>.  

</li></ul></div>
<div class="slide">
<h1>Java: The Bad and Half‚Äêbad

</h1><ul><li level="1">No support for graphemes or other standard Unicode algorithms
like collation and linebreaking.  

</li><li level="1">No support for named characters like <code>\N{PILE OF POO}</code>, so
you have to put all these magic numbers in your code.  But <i>which</i>
magic numbers?  It‚Äôs a üí©  situation.

</li><li level="1">Encoding errors are silently ignored unless you work really hard.

</li><li level="1">On the other hand, Java <i>does</i> support full case<b>mapping</b>, even though it
supports only simple case<b>folding</b>.  

</li></ul></div>
<div class="slide">
<h1>Java Tips

</h1><ul><li level="1"><b>Avoid the Java preprocessor!</b>  I‚Äôm talking about things like <code>\u<i>XXXX</i></code>.

</li><li level="1">Java has no way of indicating the encoding of a source unit interior to that
Ô¨Åle itself.  You have to put it on the command line:

<pre> % javac -encoding UTF-8 SomeanNoyinGanDillegiBlenAme.java </pre></li><li level="1">The ‚Äúdefault‚Äù encoding if unspeciÔ¨Åed varies from one platform to the next, 
so if you do not specify it exclicitly, even on <code>std{in,out,err}</code>, 
<i><b>your code is not portable</b></i>.  

</li><li level="1">No exceptions, either, so it‚Äôs <i><b>not</b></i> just
<i>‚Äúwrite‚Äêonce & run‚Äênowhere‚Äù</i>.  Instead, 
<i>?it?s write?once <i>&</i> run?nowhere?</i>. Have a nice day.

</li><li level="1">Sometimes you can put a band‚Äêaid around that problem at runtime this way:

<pre> % java -Dfile.encoding=UTF-8 SomeanNoyinGanDillegiBlenAme </pre></li></ul></div>
<div class="slide">
<h1>More Java Tips

</h1><ul><li level="1">The constructors for bridging bytes to characters all come in four forms.

<pre> InputStreamReader(InputStream in)
 InputStreamReader(InputStream in, Charset cs)
 InputStreamReader(InputStream in, CharsetDecoder dec)
 InputStreamReader(InputStream in, String charsetName)

 OutputStreamWriter(OutputStream out)
 OutputStreamWriter(OutputStream out, Charset cs)
 OutputStreamWriter(OutputStream out, CharsetEncoder enc)
 OutputStreamWriter(OutputStream out, String charsetName) </pre></li><li level="1">Only one constructor out of each set of those four is usable, because
the others hide errors from you.  

</li><li level="1">Do <i>you</i> know which is the only safe <i>&</i> sane one?  

</div>
<div class="slide">
<h1>Java Safe Streaming

</h1><p>Here‚Äôs an <code>open3</code> type procedure for Java, with correct constructors:

</p><font size=2>

<pre>    Process
    slave_process = Runtime.getRuntime().exec("perl -CS script args");

 OutputStream
 __bytes_into_his_stdin  = slave_process.getOutputStream();

 OutputStreamWriter
   chars_into_his_stdin  = new OutputStreamWriter(
                             __bytes_into_his_stdin,
         /* DO NOT OMIT! */  Charset.forName("UTF-8").newEncoder()
                         );

 InputStream
 __bytes_from_his_stdout = slave_process.getInputStream();

 InputStreamReader
   chars_from_his_stdout = new InputStreamReader(
                             __bytes_from_his_stdout,
         /* DO NOT OMIT! */  Charset.forName("UTF-8").newDecoder()
                         );

 InputStream
 __bytes_from_his_stderr = slave_process.getErrorStream();

 InputStreamReader
   chars_from_his_stderr = new InputStreamReader(
                             __bytes_from_his_stderr,
         /* DO NOT OMIT! */  Charset.forName("UTF-8").newDecoder()
                         ); </pre></font>

</div>
<div class="slide">
<h1>Java Regexes: (Finally) Some Good News

</h1><ul><li level="1">Prior to JDK7, I would <i>not</i> recommend attempting to use the Java
<code>Pattern</code> class for regexes, and would embellish any uses of <code>Character</code> and
<code>String</code> with strong provisos.

</li><li level="1">However, JDK7 goes a <i>seriously</i> long way toward changing that.  üòá  

</li><li level="1">By bringing Java into compliance with all of UTS#18‚Äôs Level 1 requirements
for the very most basic of Unicode regex handling, you can <i>Ô¨Ånally</i> do 
basic Unicode regex handling per UTS#18.

</li><li level="1">Java v1.7 is the Ô¨Årst language so far discussed
for which this is true.

</li></ul></div>
<div class="slide">
<h1>Java Regexes: Still a Ways to Go

</h1><ul><li level="1">However, I‚Äôd <i>still</i> JNI into ICU‚Äôs regex library to do serious Unicode
regex work ‚Äî if I had to do it in Java.   

</li><li level="1">That‚Äôs because you truly do need RL2.2‚Äôs 
grapheme support and RL2.7‚Äôs full property support for <i>real</i> Unicode work.  

</li><li level="1">That‚Äôs why this is what Google does on Android.  

</li><li level="1">The Android JNI wrappers are open source.  Look for the Ô¨Åle
<code>NativeRegEx.cpp</code> in the public Android repository.

</li></ul></div>
<div class="slide">
<h1>The JDK7 Regex Revolution

</h1><ul><li level="1">As of v1.7, Java supports Unicode v6.0.0, with many classes Ô¨Åxed.  

</li><li level="1">The new <code>\x{<i>XXXXXX</i>}</code> regex escape gets around The UTF‚Äê16 Curse.
The previously broken <code>[ùíú‚Äëùíµ]</code> can now be written <code>[\x{1D49C}‚Äë\x{1D4B5}]</code>.  

</li><li level="1">The new <code>UNICODE_CHARACTER_CLASSES</code> compilation Ô¨Çag changes the
charclass abbreviations like <code>\w</code> <i>&c</i>, and also the POSIX ones like
<code>\p{alpha}</code>, to make them do what UTS#18 says they‚Äôre <i>supposed</i> to do.  

</li><li level="1">There‚Äôs a new <code>"(?U)"</code> Ô¨Çag embeddable in the pattern to do the same
thing.

</li></ul></div>
<div class="slide">
<h1>JDK7: And That‚Äôs Not All

</h1><ul><li level="1">Casing tests and conversions now work on all applicable
code points.  

<ul><li level="1">Oops, spoke too soon: Because <code>String.equalsIgnoreCase()</code> still erroneously
treats strings as UCS‚Äê2 sequences not as UTF‚Äê16, it fails to notice that
<i>êêîêêáêêùêêÄêê°êêáêêì</i> and <i>êêºêêØêëÖêê®êëâêêØêêª</i> are the same.  Use ICU‚Äôs <code>CaseInsenitiveString.equals()</code>
instead for correct behavior.

</li></ul></li><li level="1"><i><b>All</b></i> missing properties from UTS18‚Äôs RL1.2 <b>eleven mandatory ones</b> have 
been added, including especially <code>\p{script=<i>SCRIPTNAME</i>}</code>,  
also usable as <code>\p{is<i>SCRIPTNAME</i>}</code> or <code>\p{<i>SCRIPTNAME</i>}</code>.

</li><li level="1">Before they worked only on letters alone, not on <code>Other_Alphabetic</code>.  

</li></ul></div>
<div class="slide">
<h1>Perl Unicode Gotchas

</h1><ul><li level="1">I‚Äôve already given something like four hours of talks this week on Unicode 
in Perl.  Since we‚Äôre already over our time limit, I‚Äôll mostly refer 
you to those materials. 

</li><li level="1">You <i>may</i> wish to set your <code>PERL_UNICODE</code> envariable to <code>"SA"</code>, or
in certain <i>very</i> limited <i>&</i> one‚Äêshot cases, even to <code>"SAD"</code>.

</li><li level="1">The short story is that you will spare yourself a great deal of pain and 
suÔ¨Äering  if you start every Perl  program this way: 

<pre> use v5.14;   # many, ùòÆùò¢ùòØùò∫ Unicode fixes
 use utf8;    # so source code is UTF-8
 use strict;
 use warnings;

 use autodie; ## ùòΩùôêùôÇ! conflicts with ùò∂ùò¥ùò¶¬†ùò∞ùò±ùò¶ùòØ below!!

 use charnames qw&lt; :full >;     # standard \N{charnames}

 use open qw&lt; :std :encoding(UTF-8) >;  # default streams </pre></li></ul></div>
<div class="slide">
<h1>Perl Unicode Specialties

</h1><ul><li level="1">Perl meets RL2.7 by supporting <i>all</i> standard Unicode properties, including
all name and value aliases.  But Perl goes further: it even lets you create your very own customized properties.  

</li><li level="1">Same story with <code>\N{<i>NAMED CHARACTER</i>}</code>: 
you can create your own customized versions of those, too.  I use this all the time.

</li><li level="1">Not only does Perl <i>not</i> restrict your code points to 16 bits, it 
doesn‚Äôt even restrict them to Unicode‚Äôs own 21 bits.  If you can‚Äôt think of
something to do with 72 bits of characters, I know people who can.  

</li><li level="1">Perl‚Äôs <b>standard</b> module implementing the Unicode Collation Algorithm ‚Äî part of 
every distribution since v5.7 and now as of v5.14 with locale support, too ‚Äî
makes it especially easy to create customized sorts, run 
<b><i>accent‚Äêinsensitive</i> string comparisons and searches</b>,
and much more.  I use this nearly every day.

</li></ul></div>
<div class="slide">
<h1>üèÅ And Our Winner Is...

</h1><ul><li level="1">Look back at the two charts of feature summaries on slides 7 <i>&</i> 8. 
We knew where we were going right from the start: üí™  <b>Perl still wins this round.</b>

</li><li level="1">Even though üê™  oÔ¨Äers the most complete Unicode support of all these 
languages, that doesn‚Äôt mean it‚Äôs without its bumps:
there‚Äôs still plenty of work to be done.

</li><li level="1">No matter what language you use, everyone needs to learn basic things about
Unicode, and perhaps <i>unlearn</i> some basic things, too: myths
such as Unicode is ‚Äúlike ASCII but with more characters‚Äù or that it‚Äôs ‚Äújust for non‚ÄêEnglish‚Äù.

</li><li level="1">If üê™  isn‚Äôt your favorite language, this is a great opportunity
for  ambitious and enterprising üê£  programmers to bring  üêç üíé ‚òï
up to speed at ((more) fully) supporting The Unicode Standard.

</li><li level="1">Perl avoided certain Unicode mistakes other languages
made (like Java, for one) by learning from others‚Äô mistakes; maybe you can see 
things Perl has done wrong with Unicode and similarly improve your own language. üëì 

</div>
<div class="slide">
<h1>Good Luck üçÄ   and Good Night üåÉ 

</h1><ul><li level="1">Even if you don‚Äôt use Perl, the score or so of  Unicode tools
I wrote that are in the <code>Unicode::Tussle</code> bundle from CPAN will really make 
your Unicode life a lot easier.  

<pre> http://search.cpan.org/perldoc?Unicode::Tussle

 % sudo perl -MCPAN -e 'install Unicode::Tussle' </pre></li><li level="1">Brief demos of these tools are included in my other conference materials, 
plus many more such are included with the module documentation.

</li><li level="1">Thanks very much to Brian Foy for putting that CPAN bundle together for me, 
and for getting me to give this talk in the Ô¨Årst place.  üëè  

<center>
        <font size="+5">
<p>
ùî¢ùîµùî¢ùî≤ùî´ùî±¬†ùî¨ùî™ùî´ùî¢ùî∞
<p>
üç∏  
</font>
</center>

</li></ul></div>
<div class="slide">
<h1>Appendix 1: Font suggestions

</h1><ul><li>
I recommend 
two free fonts from George
Douros at
<A HREF="http://users.teilar.gr/~g1951d/">
users.teilar.gr/~g1951d/</a> 
known to work with this presentation: his <i>Al&#64257;os</i> font for regular
text, and his <i>Symbola</i> font for fancy emoji.
If any of these don&#8217;t look right to you, you probably need to 
supplement your system fonts:
<ul>

<li>Ligatures: 
    <font face="'Arno Pro', Alfios,  Pali, Serif">
        &#64257; &#64259; &#64256; &#64260; &#64258; &#946; &#7838; &#64261;  &#64262; 
    </font>

<li>Math letters: 
    <font face="Symbola, Serif">
        &#119964; &#119967; &#120069; &#120078; &#120124; &#120125; 
    </font>

<li>Gothic <i>&</i> Deseret: 
    <font face="Symbola, Serif">
&#66360;&#66364;&#66365;&#66370;, &#66580;&#66607;&#66629;&#66600;&#66633;&#66607;&#66619;
    </font>

<li>Symbols: 
    <font face="Symbola, Sans">
        &#10004; &#9989; &#128042; &#128214; &#128706; &#128013; 
    </font>

<li>Emoticons: 
    <font face="Symbola, Sans">
        &#128519; &#128520; &#128521; &#128552; &#128557; &#128561; 
    </font>

<li>Upside&#8208;down:
    <font size=2 face="Monaco, Mono">
        &#161;p&#592;&#601;&#613; &#633;no&#654; uo &#387;u&#7433;pu&#592;&#647;s &#654;q s&#7433;&#613;&#647; p&#592;&#601;&#7450;
    </font>

<li>Combining characters: 


    <font face="Monaco, 'Everson Mono', Mono">
&#9676;&#770;,&#9676;&#771;,&#9676;&#8414;,&#9676;&#818;,&#9676;&#65024;,&#9676;&#821;,&#9676;&#823;
    </font>

</ul>
<li>The last line with combining characters is especially hard to get to
look right.  You may &#64257;nd that the shareware font <i>Everson Mono</i>
works when all else fails.

</ul>

</div>
<div class="slide">
<h1>Appendix 2: Tools

</h1><ul>
<li>
I wrote a huge bucketful of tools to make your life with Unicode not just easier, but more fun.
<li>These are available in 
the <a href="http://search.cpan.org/perldoc?Unicode::Tussle" target=_blank>Unicode::Tussle</a> bundle from CPAN,
where they come with <a href="http://search.cpan.org/perldoc?Unicode::Tussle" target=_blank>documentation</a>,
or you can get them individually 
from <a href="http://training.perl.com/scripts/" target=_blank>training.perl.com/scripts</a> if you&#8217;d prefer.

<li>
Thanks very much to <i>brian d foy</i> for putting that CPAN bundle together for me.
</ul>

</div>
<div class="slide">
<h1>Contact Information

</h1><ul>
<li>
I‚Äôm Tom Christiansen.  You can reach me at <A HREF="mailto:tchrist@perl.com">tchrist@perl.com</a>.
<li>
All three talks, as well as these instructions, are available from 
<a  href="http://training.perl.com/OSCON2011/index.html">
training.perl.com/OSCON2011</a>.
</ul>

</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></div></body></html>




<!--
     FILE ARCHIVED ON 8:13:32 Dec 24, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 0:40:39 Nov 25, 2015.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
